<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <title>Carrinho - Biblioteca Geek</title>
        <meta name="keywords" content="carrinho, compra, geek, livros, tecnologia">
        <meta name="description" content="Revise e finalize sua compra na Biblioteca Geek.">
        <meta name="author" content="Seu Nome ou Nome da Empresa">
        
        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/responsive.css">
        <link rel="stylesheet" type="text/css" href="css/cess.css"> 
        <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
        <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
        
        <link rel="icon" href="images/fevicon.png" type="image/gif" />
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Georgia:wght@400;700&display=swap" rel="stylesheet">

        <style>
            /* VARIÁVEIS DE CORES DO TEMA NEON */
            :root {
                --cor-texto-cian: #00FFFF; 
                --cor-acao-red: #FF0000; 
            }
            
            /* GERAL */
            body {
                background-color: #000000;
                color: var(--cor-texto-cian);
                font-family: 'Roboto', sans-serif;
                line-height: 1.6;
                overflow-x: hidden;
            }

            /* Links em geral */
            a {
                color: var(--cor-texto-cian);
                text-decoration: none;
                transition: all 0.3s ease;
            }

            a:hover {
                color: var(--cor-acao-red);
                text-decoration: none;
            }

            /* HEADER E NAVEGAÇÃO */
            .header_section {
                background-color: #1a1a1a; 
                padding: 5px 0; 
                border-bottom: 2px solid #333333;
            }

            .navbar {
                background-color: transparent !important;
                padding: 0;
            }

            .navbar-brand img {
                max-width: 70px; 
                filter: drop-shadow(0 0 5px var(--cor-texto-cian)); 
            }
            
            .navbar-toggler-icon {
                background-image: url("data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba%280, 255, 255, 1%29' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E") !important;
            }


            .navbar-nav .nav-item .nav-link {
                color: var(--cor-texto-cian);
                font-weight: 500;
                padding: 8px 12px; 
                margin: 0 3px;
                border-radius: 5px;
                position: relative;
            }

            .navbar-nav .nav-item .nav-link:hover {
                color: var(--cor-acao-red);
                background-color: rgba(0, 255, 255, 0.1);
                text-shadow: 0 0 8px var(--cor-acao-red);
            }

            /* Estilo para item ATIVO */
            .navbar-nav .nav-item.active .nav-link {
                color: var(--cor-acao-red);
                text-shadow: 0 0 8px var(--cor-acao-red);
                border: 1px solid var(--cor-acao-red);
            }

            .login_bt a {
                display: inline-block;
                background-color: var(--cor-acao-red);
                color: #000000;
                padding: 8px 20px;
                border-radius: 20px;
                text-transform: uppercase;
                font-weight: bold;
                margin-left: 15px;
                box-shadow: 0 0 10px var(--cor-acao-red);
                transition: all 0.3s ease;
            }

            .login_bt a:hover {
                background-color: var(--cor-texto-cian);
                box-shadow: 0 0 15px var(--cor-texto-cian);
            }

            .login_bt a .fa-user {
                color: #000000 !important;
            }
            
            /* SEÇÃO DO CARRINHO  */
            .contact_section {
                padding: 60px 0;
            }

            .contact_taital {
                color: var(--cor-acao-red);
                font-family: 'Georgia', serif;
                font-size: 3rem;
                font-weight: 700;
                margin-bottom: 40px;
                text-align: center;
                text-shadow: 0 0 15px var(--cor-acao-red);
            }

            /* ESTILO DA TABELA DO CARRINHO  */
            .cart-table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 20px;
                background-color: #1a1a1a; 
                box-shadow: 0 0 20px rgba(0, 255, 255, 0.2); 
                border: 1px solid var(--cor-texto-cian);
            }

            .cart-table th, .cart-table td {
                padding: 15px;
                text-align: left;
                border-bottom: 1px dashed #333333;
                color: #cccccc;
                font-size: 1.05rem;
            }

            .cart-table th {
                background-color: var(--cor-texto-cian); 
                color: #000000; 
                font-weight: bold;
                text-transform: uppercase;
                border-top: 2px solid var(--cor-texto-cian);
                border-bottom: 2px solid var(--cor-texto-cian);
            }
            
            .cart-table tbody tr:hover {
                background-color: #2a2a2a; 
            }

            .cart-table .total-row td {
                background-color: #333333;
                color: var(--cor-acao-red); 
                font-size: 1.2rem;
                border-top: 2px solid var(--cor-acao-red);
                border-bottom: none;
            }
            
            /* Botões de quantidade na tabela */
            .cart-table button {
                background-color: var(--cor-acao-red);
                color: #000000;
                border: none;
                padding: 5px 10px;
                margin: 0 5px;
                cursor: pointer;
                border-radius: 3px;
                font-weight: bold;
                transition: background-color 0.2s;
            }

            .cart-table button:hover {
                background-color: var(--cor-texto-cian);
                box-shadow: 0 0 5px var(--cor-texto-cian);
            }
            
            .cart-table .remove-btn {
                background-color: var(--cor-acao-red);
                box-shadow: 0 0 5px var(--cor-acao-red);
                color: #000000;
            }

            .cart-table .remove-btn:hover {
                background-color: #cc0000;
                box-shadow: 0 0 8px var(--cor-acao-red);
            }
            
            .empty-cart {
                color: var(--cor-acao-red);
                font-size: 1.5rem;
                text-align: center;
                padding: 50px;
                border: 1px dashed var(--cor-acao-red);
                background-color: #1a1a1a;
                border-radius: 5px;
                margin-top: 20px;
                text-shadow: 0 0 5px var(--cor-acao-red);
            }

            /* Botões principais da seção do carrinho */
            .contact_section .btn-primary,
            .contact_section .btn-success,
            .contact_section .btn-danger {
                padding: 12px 30px;
                border-radius: 25px;
                font-size: 1.1rem;
                font-weight: bold;
                margin: 0 10px;
                transition: all 0.3s ease;
                border: none;
            }

            /* Estilo dos Botões - Continuar Comprando  */
            .contact_section .btn-primary {
                background-color: var(--cor-texto-cian);
                color: #000000;
                box-shadow: 0 0 10px var(--cor-texto-cian);
            }
            .contact_section .btn-primary:hover {
                background-color: #00cccc;
                color: #000000;
                box-shadow: 0 0 15px var(--cor-texto-cian);
            }

            /* Estilo dos Botões - Finalizar Compra  */
            .contact_section .btn-success {
                background-color: var(--cor-acao-red);
                color: #000000;
                box-shadow: 0 0 10px var(--cor-acao-red);
            }
            .contact_section .btn-success:hover {
                background-color: #cc0000;
                color: #000000;
                box-shadow: 0 0 15px var(--cor-acao-red);
            }
            
            /* Estilo dos Botões - Limpar Carrinho */
            .contact_section .btn-danger {
                background-color: #660000; 
                color: #CCCCCC;
                box-shadow: none;
            }
            .contact_section .btn-danger:hover {
                background-color: #FF0000;
                color: #000000;
                box-shadow: 0 0 10px #FF0000;
            }


            /* COPYRIGHT */
            .copyright_section {
                background-color: #1a1a1a;
                padding: 30px 0; 
                text-align: center;
                border-top: 2px solid #333333;
                margin-top: 50px; 
            }
            .copyright_text {
                color: #999999;
                font-size: 0.9rem;
            }

            /* RESPONSIVIDADE */
            @media (max-width: 991.98px) {
                #navbarSupportedContent {
                    text-align: center;
                }
                .navbar-nav {
                    width: 100%;
                    margin-left: auto !important; 
                    margin-right: auto !important; 
                    float: none;
                }
                .navbar-nav .nav-item .nav-link {
                    display: block; 
                }
                .form-inline {
                    width: 100%; 
                    justify-content: center !important; 
                    margin-top: 10px;
                    margin-left: 0 !important; 
                }
                .navbar-brand img {
                    max-width: 70px; 
                }
                
                .contact_taital {
                    font-size: 2.5rem;
                }
                .cart-table th, .cart-table td {
                    padding: 10px;
                    font-size: 0.9rem;
                }
                .contact_section .btn-primary, .contact_section .btn-success, .contact_section .btn-danger {
                    margin: 5px 0;
                    display: block;
                    width: 100%;
                }
            }
        </style>
    </head>
    
    <body>
        <div class="header_section">
            <div class="container">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand"href="index.html">
                        <img src="images/logo.png" alt="Biblioteca Geek Logo">
                    </a>
                    
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="index.html">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="livros.html">Livros</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="sobre.html">Sobre</a>
                            </li>
                            <li class="nav-item active">
                                <a class="nav-link" href="carinhooo.html">Carrinho</a>
                            </li>
                        </ul>
                        <form class="form-inline my-2 my-lg-0 ml-auto">
                            <div class="login_bt">
                                <a href="login.html">
                                    Login <span style="color: #000000;"><i class="fa fa-user" aria-hidden="true"></i></span>
                                </a>
                            </div>
                        </form>
                    </div>
                </nav>
            </div>
        </div>
        <div class="contact_section layout_padding">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <h1 class="contact_taital">Seu Carrinho 🛒</h1>
                        
                        <div id="cart-content" class="table-responsive">
                            <div class="empty-cart">Inicializando sistema...</div>
                        </div>
                        
                        <div class="text-center mt-4">
                            <a href="livros.html" class="btn btn-primary">Continuar Comprando</a> 
                            <button id="checkout-btn" class="btn btn-success ml-2">Finalizar Compra</button>
                            <button id="clear-cart" class="btn btn-danger ml-2">Limpar Carrinho</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="copyright_section">
            <div class="container">
                <p class="copyright_text">2024 Todos os direitos reservados. Biblioteca Geek - Onde o conhecimento encontra a paixão.</p>
            </div>
        </div>
        
        <script src="js/jquery.min.js"></script>
        <script src="js/popper.min.js"></script>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script src="js/jquery-3.0.0.min.js"></script>
        <script src="js/plugin.js"></script>
        <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
        <script src="js/custom.js"></script>
        
        <script>
            // Funções de Carrinho
            function getUrlParams() {
                const params = new URLSearchParams(window.location.search);
                return {
                    product: params.get('product'),
                    price: params.get('price')
                };
            }
            
            function getCart() {
                const cart = localStorage.getItem('cart');
                return cart ? JSON.parse(cart) : [];
            }
            
            function saveCart(cart) {
                localStorage.setItem('cart', JSON.stringify(cart));
            }
            
            function addToCart(product, price) {
                const cart = getCart();
                const existingItem = cart.find(item => item.product === product);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        product: product,
                        price: parseFloat(price),
                        quantity: 1
                    });
                }
                
                saveCart(cart);
                renderCart();
            }
            
            function removeFromCart(index) {
                const cart = getCart();
                cart.splice(index, 1);
                saveCart(cart);
                renderCart();
            }
            
            function updateQuantity(index, change) {
                const cart = getCart();
                cart[index].quantity += change;
                
                if (cart[index].quantity <= 0) {
                    removeFromCart(index);
                } else {
                    saveCart(cart);
                    renderCart();
                }
            }
            
            // Função para renderizar a tabela do carrinho 
            function renderCart() {
                const cart = getCart();
                const cartContent = document.getElementById('cart-content');
                
                if (cart.length === 0) {
                    cartContent.innerHTML = '<div class="empty-cart">Seu carrinho está vazio. Adicione itens da nossa coleção geek!</div>';
                    return;
                }
                
                let tableHTML = `
                    <table class="cart-table">
                        <thead>
                            <tr>
                                <th>Produto</th>
                                <th>Preço Unitário</th>
                                <th>Quantidade</th>
                                <th>Subtotal</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                let total = 0;
                
                cart.forEach((item, index) => {
                    const subtotal = item.price * item.quantity;
                    total += subtotal;
                    
                    tableHTML += `
                        <tr>
                            <td>${item.product}</td>
                            <td>$${item.price.toFixed(2)}</td>
                            <td>
                                <button onclick="updateQuantity(${index}, -1)">-</button>
                                ${item.quantity}
                                <button onclick="updateQuantity(${index}, 1)">+</button>
                            </td>
                            <td>$${subtotal.toFixed(2)}</td>
                            <td><button class="remove-btn" onclick="removeFromCart(${index})">Remover</button></td>
                        </tr>
                    `;
                });
                
                tableHTML += `
                        <tr class="total-row">
                            <td colspan="3" style="text-align: right;"><strong>Total a Pagar:</strong></td>
                            <td><strong>$${total.toFixed(2)}</strong></td>
                            <td></td>
                        </tr>
                        </tbody>
                    </table>
                `;
                
                cartContent.innerHTML = tableHTML;
            }
            
            function checkout() {
                const cart = getCart();
                
                if (cart.length === 0) {
                    alert('Seu carrinho está vazio!');
                    return;
                }
                
                alert('A transação está sendo processada... Total: $' + 
                    cart.reduce((sum, item) => sum + (item.price * item.quantity), 0).toFixed(2) + 
                    '\nObrigado por comprar na Biblioteca Geek!');
                
                localStorage.removeItem('cart');
                renderCart();
            }
            
            function clearCart() {
                if (confirm('Atenção: Todos os itens serão removidos. Deseja limpar o carrinho?')) {
                    localStorage.removeItem('cart');
                    renderCart();
                }
            }
            
            // Inicializar a página
            document.addEventListener('DOMContentLoaded', function() {
                const params = getUrlParams();
                if (params.product && params.price) {
                    // Adiciona o item se veio da URL (o que é o fluxo de "Adicionar ao Carrinho")
                    addToCart(params.product, params.price);
                }
                
                renderCart();
                
                // Configura os listeners dos botões
                document.getElementById('checkout-btn').addEventListener('click', checkout);
                document.getElementById('clear-cart').addEventListener('click', clearCart);
            });
        </script>
    </body>
</html>